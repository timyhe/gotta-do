/// <reference path="imagine-gulp-tools.d.ts" />

let fs = require("fs");
let gulp = require("gulp");
let gulpconcat = require("gulp-concat");    // concatenates all files together
let util = require("gulp-util");

/** concat defined libraries into single js file */
lib = (options) => {
    let isMissing = false;
    // check if all libraries exist before starting
    for (let x = 0; x < options.files.length; x++) {
        if (!fs.existsSync(options.files[x])) {
            util.log("Library file " + options.files[x] + " is missing!");
            isMissing = true;
        }
    }

    return isMissing ? util.noop() : 
        gulp.src(options.files)
            .pipe(gulpconcat(options.name))
            .pipe(gulp.dest(options.dest));
}

module.exports = lib;