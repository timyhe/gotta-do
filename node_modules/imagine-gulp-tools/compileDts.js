/// <reference path="imagine-gulp-tools.d.ts" />
let gulp = require("gulp");
let util = require("gulp-util");
let gulpconcat = require("gulp-concat");    // concatenates all files together
let ts = require("gulp-typescript");        // compiles typescript

compileDts = (options) => {
    let tsProject = options.optionsSrc ?
        ts.createProject(options.optionsSrc, options.optionsOverride) :
        ts.createProject({
            "target": "es5",
            "module": "commonjs",
            "removeComments": true,
            "declaration": true
        });

    return gulp.src(options.src)
        .pipe(tsProject())
        .dts
        .pipe(options.bundleName ? gulpconcat(options.bundleName) : util.noop())
        .pipe(gulp.dest(options.dest));
}

module.exports = compileDts;